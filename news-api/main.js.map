{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-webpack-project/./src/components/view/appView.js","webpack://my-webpack-project/./src/components/view/news/news.js","webpack://my-webpack-project/./src/components/view/sources/sources.js","webpack://my-webpack-project/./src/index.js","webpack://my-webpack-project/./src/components/app/app.js","webpack://my-webpack-project/./src/components/controller/controller.js","webpack://my-webpack-project/./src/components/controller/appLoader.js","webpack://my-webpack-project/./src/components/controller/loader.js"],"sourcesContent":["import News from './news/news';\nimport Sources from './sources/sources';\n\nexport class AppView {\n    constructor() {\n        this.news = new News();\n        this.sources = new Sources();\n    }\n\n    drawNews(data) {\n        const values = data?.articles ? data?.articles : [];\n        this.news.draw(values);\n    }\n\n    drawSources(data) {\n        const values = data?.sources ? data?.sources : [];\n        this.sources.draw(values);\n    }\n}\n\nexport default AppView;\n","import './news.css';\n\nclass News {\n    draw(data) {\n        const news = data.length >= 10 ? data.filter((_item, idx) => idx < 10) : data;\n\n        const fragment = document.createDocumentFragment();\n        const newsItemTemp = document.querySelector('#newsItemTemp');\n\n        news.forEach((item, idx) => {\n            const newsClone = newsItemTemp.content.cloneNode(true);\n\n            if (idx % 2) newsClone.querySelector('.news__item').classList.add('alt');\n\n            newsClone.querySelector('.news__meta-photo').style.backgroundImage = `url(${\n                item.urlToImage || 'img/news_placeholder.jpg'\n            })`;\n            newsClone.querySelector('.news__meta-author').textContent = item.author || item.source.name;\n            newsClone.querySelector('.news__meta-date').textContent = item.publishedAt\n                .slice(0, 10)\n                .split('-')\n                .reverse()\n                .join('-');\n\n            newsClone.querySelector('.news__description-title').textContent = item.title;\n            newsClone.querySelector('.news__description-source').textContent = item.source.name;\n            newsClone.querySelector('.news__description-content').textContent = item.description;\n            newsClone.querySelector('.news__read-more a').setAttribute('href', item.url);\n\n            fragment.append(newsClone);\n        });\n\n        document.querySelector('.news').innerHTML = '';\n        document.querySelector('.news').appendChild(fragment);\n    }\n}\n\nexport default News;\n","import './sources.css';\n\nclass Sources {\n    draw(data) {\n        const fragment = document.createDocumentFragment();\n        const sourceItemTemp = document.querySelector('#sourceItemTemp');\n\n        data.forEach((item) => {\n            const sourceClone = sourceItemTemp.content.cloneNode(true);\n\n            sourceClone.querySelector('.source__item-name').textContent = item.name;\n            sourceClone.querySelector('.source__item').setAttribute('data-source-id', item.id);\n\n            fragment.append(sourceClone);\n        });\n\n        document.querySelector('.sources').append(fragment);\n    }\n}\n\nexport default Sources;\n","import App from './components/app/app';\nimport './global.css';\n\nconst app = new App();\napp.start();\n","import AppController from '../controller/controller';\nimport { AppView } from '../view/appView';\n\nclass App {\n    constructor() {\n        this.controller = new AppController();\n        this.view = new AppView();\n    }\n\n    start() {\n        document\n            .querySelector('.sources')\n            .addEventListener('click', (e) => this.controller.getNews(e, (data) => this.view.drawNews(data)));\n        this.controller.getSources((data) => this.view.drawSources(data));\n    }\n}\n\nexport default App;\n","import AppLoader from './appLoader';\n\nclass AppController extends AppLoader {\n    getSources(callback) {\n        super.getResp(\n            {\n                endpoint: 'sources',\n            },\n            callback\n        );\n    }\n\n    getNews(e, callback) {\n        let target = e.target;\n        const newsContainer = e.currentTarget;\n\n        while (target !== newsContainer) {\n            if (target.classList.contains('source__item')) {\n                const sourceId = target.getAttribute('data-source-id');\n                if (newsContainer.getAttribute('data-source') !== sourceId) {\n                    newsContainer.setAttribute('data-source', sourceId);\n                    super.getResp(\n                        {\n                            endpoint: 'everything',\n                            options: {\n                                sources: sourceId,\n                            },\n                        },\n                        callback\n                    );\n                }\n                return;\n            }\n            target = target.parentNode;\n        }\n    }\n}\n\nexport default AppController;\n","import Loader from './loader';\n\nclass AppLoader extends Loader {\n  constructor() {\n    super('https://newsapi.org/v2/', {\n      apiKey: 'cd32042d4b8845fbba3c53ed2d341562', // получите свой ключ https://newsapi.org/\n    });\n  }\n}\n\nexport default AppLoader;\n","class Loader {\n    constructor(baseLink, options) {\n        this.baseLink = baseLink;\n        this.options = options;\n    }\n\n    getResp(\n        { endpoint, options = {} },\n        callback = () => {\n            console.error('No callback for GET response');\n        }\n    ) {\n        this.load('GET', endpoint, callback, options);\n    }\n\n    errorHandler(res) {\n        if (!res.ok) {\n            if (res.status === 401 || res.status === 404)\n                console.log(`Sorry, but there is ${res.status} error: ${res.statusText}`);\n            throw Error(res.statusText);\n        }\n\n        return res;\n    }\n\n    makeUrl(options, endpoint) {\n        const urlOptions = { ...this.options, ...options };\n        let url = `${this.baseLink}${endpoint}?`;\n\n        Object.keys(urlOptions).forEach((key) => {\n            url += `${key}=${urlOptions[key]}&`;\n        });\n\n        return url.slice(0, -1);\n    }\n\n    load(method, endpoint, callback, options = {}) {\n        fetch(this.makeUrl(options, endpoint), { method })\n            .then(this.errorHandler)\n            .then((res) => res.json())\n            .then((data) => callback(data))\n            .catch((err) => console.error(err));\n    }\n}\n\nexport default Loader;\n"],"names":["AppView","constructor","this","news","draw","data","length","filter","_item","idx","fragment","document","createDocumentFragment","newsItemTemp","querySelector","forEach","item","newsClone","content","cloneNode","classList","add","style","backgroundImage","urlToImage","textContent","author","source","name","publishedAt","slice","split","reverse","join","title","description","setAttribute","url","append","innerHTML","appendChild","sources","sourceItemTemp","sourceClone","id","drawNews","values","articles","drawSources","controller","baseLink","options","getResp","endpoint","callback","console","error","load","errorHandler","res","ok","status","log","statusText","Error","makeUrl","urlOptions","Object","keys","key","method","fetch","then","json","catch","err","super","apiKey","getSources","getNews","e","target","newsContainer","currentTarget","contains","sourceId","getAttribute","parentNode","view","start","addEventListener"],"sourceRoot":""}