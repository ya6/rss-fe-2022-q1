(()=>{"use strict";var t={178:function(t,e,r){var a=this&&this.__awaiter||function(t,e,r,a){return new(r||(r=Promise))((function(n,o){function s(t){try{i(a.next(t))}catch(t){o(t)}}function l(t){try{i(a.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,l)}i((a=a.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(r(641)),s=n(r(81)),l=n(r(12)),i=n(r(126));e.default=class{static start(){return a(this,void 0,void 0,(function*(){document.body.addEventListener("click",s.default.dispatch);const t=yield o.default.getAll();l.default.saveToStorage("authenticData",t.default);const e=l.default.loadFromStorage("currentData")||t.default;l.default.saveToStorage("currentData",e),l.default.loadFromStorage("cart")||l.default.saveToStorage("cart",{}),l.default.saveToStorage("filters",{category:[],title:"",brand:"",size:"",color:[],quantity:100,price:1e3,year:2023,titleSort:"",yearSort:""}),i.default.drawControls(),i.default.drawCartQ(),i.default.drawCards(e,l.default.loadFromStorage("filters"))}))}}},659:function(t,e,r){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(r(12));e.default=class{static add(){}static showQ(){const t=n.default.loadFromStorage("cart");let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e+=Number(t[r].inCart));const r=document.querySelector(".cart-count");null!==r&&(r.textContent=String(e))}}},126:function(t,e,r){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(r(33)),o=a(r(892)),s=a(r(354)),l=a(r(12)),i=a(r(659)),c=a(r(271));e.default=class{static drawCards(t,e){const r=document.querySelector(".content"),a=o.default.complexFilter(t,e);let l=null;null!==a&&(l=s.default.generateCards(a)),null!==r&&null!==l&&(r.innerHTML="",n.default.appendElements(r,l))}static drawCartQ(){i.default.showQ()}static drawControls(){c.default.setControls(l.default.loadFromStorage("currentData"))}static clearAllData(){const t=l.default.loadFromStorage("authenticData");l.default.saveToStorage("currentData",t),l.default.saveToStorage("cart",{}),l.default.saveToStorage("filters",{category:[],title:"",brand:"",size:"",color:[],quantity:100,price:1e3,year:2023,titleSort:"",yearSort:""})}}},271:function(t,e,r){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(r(33));e.default=class{static setControls(t){const e=document.querySelector(".category");let r=new Set(t.map((t=>t.category)));r=new Set(r);const a=[...r].map((t=>{const e=document.createElement("button");return e.className="controls-category",e.setAttribute("data-filter",`category ${t}`),e.textContent=String(t).charAt(0).toUpperCase()+String(t).slice(1),e})),o=document.createElement("button");o.className="controls-category",o.setAttribute("data-filter","category All"),o.textContent="All",null!==e&&(n.default.appendElements(e,[o]),n.default.appendElements(e,a));const s=document.querySelector(".color");let l=new Set(t.map((t=>t.color)));l=new Set(l);const i=[...l].map((t=>{const e=document.createElement("div");return e.className="controls-color",e.setAttribute("data-filter",`color ${t}`),e.textContent=String(t),e.style.background=String(t),e})),c=document.createElement("div");c.className="controls-color",c.style.background="white",c.setAttribute("data-filter","color All"),c.textContent="All",null!==s&&(n.default.appendElements(s,[c]),n.default.appendElements(s,i));const u=document.querySelector(".price");let d=t.map((t=>t.price));d=d.sort(((t,e)=>Number(t)-Number(e)));const p=d[d.length-1],f=document.createElement("p");f.textContent=String(p),f.className="short-paragraph";const m=document.createElement("input");m.setAttribute("data-filter","price"),m.setAttribute("type","range"),m.setAttribute("min","0"),m.setAttribute("max",String(p)),m.setAttribute("step","0.05"),m.setAttribute("value",String(p)),null!==u&&n.default.appendElements(u,[f,m]);const g=document.querySelector(".year");let y=t.map((t=>t.year));y=y.sort(((t,e)=>Number(t)-Number(e)));const b=y[y.length-1],h=document.createElement("p");h.textContent=String(b),h.className="short-paragraph";const v=document.createElement("input");v.setAttribute("data-filter","year"),v.setAttribute("type","range"),v.setAttribute("min",String(y[0])),v.setAttribute("max",String(b)),v.setAttribute("step","1"),v.setAttribute("value",String(b)),null!==g&&n.default.appendElements(g,[h,v]);const S=document.querySelector(".quantity");let _=t.map((t=>t.quantity));_=_.sort(((t,e)=>Number(t)-Number(e)));const C=_[_.length-1],A=document.createElement("p");A.textContent=String(C),A.className="short-paragraph";const w=document.createElement("input");w.setAttribute("data-filter","quantity"),w.setAttribute("type","range"),w.setAttribute("min","0"),w.setAttribute("max",String(C)),w.setAttribute("step","1"),w.setAttribute("value",String(C)),null!==S&&n.default.appendElements(S,[A,w]);const M=document.querySelector(".brand"),q=document.createElement("select"),j=document.createElement("option");j.textContent="All",j.setAttribute("data-filter","brand All");let E=new Set(t.map((t=>t.brand)));E=new Set(E);const N=[...E].map((t=>{const e=document.createElement("option");return e.setAttribute("data-filter",`brand ${t}`),e.textContent=String(t),e}));null!==M&&(n.default.appendElements(q,[j]),n.default.appendElements(q,N),n.default.appendElements(M,[q]));const x=document.querySelector(".sort-by"),D=document.createElement("div");null!==x&&(D.insertAdjacentHTML("afterbegin",'\n    <p class = "short-paragraph">Year</p>\n    <button data-filter = "sort upYear">up</button>\n    <button data-filter = "sort downYear down">down</button>\n    '),n.default.appendElements(x,[D]),D.insertAdjacentHTML("afterbegin",'\n    <p class = "short-paragraph">Title</p>\n    <button data-filter = "sort upTitle">up</button>\n    <button data-filter = "sort downTitle">down</button>\n    '),n.default.appendElements(x,[D]))}}},641:function(t,e,r){var a=this&&this.__createBinding||(Object.create?function(t,e,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,n)}:function(t,e,r,a){void 0===a&&(a=r),t[a]=e[r]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&a(e,t,r);return n(e,t),e},s=this&&this.__awaiter||function(t,e,r,a){return new(r||(r=Promise))((function(n,o){function s(t){try{i(a.next(t))}catch(t){o(t)}}function l(t){try{i(a.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,l)}i((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getAll(){return s(this,void 0,void 0,(function*(){return yield Promise.resolve().then((()=>o(r(195))))}))}}},33:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static appendElements(t,e){const r=new DocumentFragment;Array.isArray(e)?r.append(...e):r.append(e),t.append(r)}}},81:function(t,e,r){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(r(12)),o=a(r(126)),s=a(r(659));e.default=class{static dispatch(t){var e,r,a;let l,i,c=null,u=null,d=!1;const p=n.default.loadFromStorage("filters"),f=n.default.loadFromStorage("currentData"),m=n.default.loadFromStorage("cart"),g=null===(e=document.querySelector(".category"))||void 0===e?void 0:e.children,y=null===(r=document.querySelector(".color"))||void 0===r?void 0:r.children;if(null!=t.target){switch(c=t.target,l=(null===(a=c.getAttribute("data-filter"))||void 0===a?void 0:a.split(" "))||[],l[0]){case"search":p.title=c.value;break;case"category":if("All"===l[1]){for(const t of g)t.classList.remove("active");p.category=[]}else c.classList.contains("active")?(c.classList.remove("active"),p.category=p.category.filter((t=>t!==l[1]))):(p.category.push(l[1]),c.classList.add("active"));break;case"price":p.price=c.value,c.parentNode.firstElementChild.textContent=c.value;break;case"quantity":p.quantity=c.value,c.parentNode.firstElementChild.textContent=c.value;break;case"year":p.year=c.value,c.parentNode.firstElementChild.textContent=c.value;break;case"brand":"All"===l[1]?p.brand="":p.brand=l[1];break;case"color":if("All"===l[1]){for(const t of y)t.classList.remove("active-push");p.color=[]}else c.classList.contains("active-push")?(c.classList.remove("active-push"),p.color=p.color.filter((t=>t!==l[1]))):(p.color.push(l[1]),c.classList.add("active-push"));break;case"sort":"upTitle"===l[1]&&(p.titleSort="up"),"downTitle"===l[1]&&(p.titleSort="down"),"upYear"===l[1]&&(p.yearSort="up"),"downYear"===l[1]&&(p.yearSort="down");break;case"id":i=f.findIndex((t=>t.id===Number(l[1]))),u=f[i],u.quantity-=1,u.inCart+=1,f[i]=u,n.default.saveToStorage("currentData",f),m[l[1]]=u,n.default.saveToStorage("cart",m);break;case"clear-all":d=!0,o.default.clearAllData()}d||n.default.saveToStorage("filters",p),o.default.drawCards(n.default.loadFromStorage("currentData"),n.default.loadFromStorage("filters")),s.default.showQ()}}}},892:function(t,e,r){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(r(12));e.default=class{static complexFilter(t,e){let r=n.default.loadFromStorage("currentData");const{category:a=[],title:o="",color:s=[],price:l=0,year:i=0,brand:c="",size:u="",quantity:d=0,titleSort:p="",yearSort:f=""}=e;return o&&(r=r.filter((t=>String(t.title).toLowerCase().includes(String(e.title).toLowerCase())))),Array.isArray(a)&&a.length&&(r=r.filter((t=>a.some((e=>t.category===e))))),Array.isArray(s)&&s.length&&(r=r.filter((t=>s.some((e=>t.color===e))))),r=r.filter((t=>Number(t.price)<=Number(l))),r=r.filter((t=>Number(t.quantity)<=Number(d))),r=r.filter((t=>Number(t.year)<=Number(i))),c&&(r=r.filter((t=>t.brand===c))),p&&(r="up"===p?r.sort(((t,e)=>String(t.title).charCodeAt(0)-String(e.title).charCodeAt(0))):r.sort(((t,e)=>String(e.title).charCodeAt(0)-String(t.title).charCodeAt(0)))),f&&(r="up"===f?r.sort(((t,e)=>Number(e.year)-Number(t.year))):r.sort(((t,e)=>Number(t.year)-Number(e.year)))),r}}},354:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static generateCards(t){return t.map((t=>this.createCard(t)))}static createCard(t){const e=document.createElement("div");e.className="product";const r=`\n    <div class="product-image" style="background-image: url(${t.img});"></div>\n    <h3 class="product-title">${t.title}</h3>\n    <div class="product-values">\n      <h2 class="product-brand">${t.brand}</h3>\n      <h2 class="product-price">$${t.price}</h3>\n    </div>\n    <div class="product-info">\n      <h2 class="product-year">${t.year}</h3>\n      <h2 class="product-quantity">${t.quantity} items</h3>\n    </div>\n    <button class="product-button" data-filter="id ${t.id}">Add to Cart</button>\n    `;return e.insertAdjacentHTML("afterbegin",r),e}}},12:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static saveToStorage(t,e){localStorage.setItem(t,JSON.stringify(e))}static loadFromStorage(t){const e=localStorage.getItem(t);return null===e?e:JSON.parse(e)}}},607:function(t,e,r){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(r(178)).default.start()},195:t=>{t.exports=JSON.parse('[{"id":1,"category":"dress","title":"Checked Short Dress","year":2020,"brand":"H&M","size":"S","color":"gray","quantity":5,"price":14.55,"img":"./assets/img/shop/dress/1.jpg","inCart":0},{"id":2,"category":"dress","title":"Light Blue Denim Dress","year":2021,"brand":"H&M","size":"S","color":"blue","quantity":10,"price":19.55,"img":"./assets/img/shop/dress/2.jpg","inCart":0},{"id":3,"category":"dress","title":"Pink Printed Dress","year":2022,"brand":"Zara","size":"M","color":"pink","quantity":10,"price":39.95,"img":"./assets/img/shop/dress/3.jpg","inCart":0},{"id":11,"category":"tshirts","title":"Black Polo Tshirt","year":2022,"brand":"Polo","size":"M","color":"black","quantity":10,"price":11.95,"img":"./assets/img/shop/tshirts/4.jpg","inCart":0},{"id":10,"category":"tshirts","title":"Blue Round-Neck","year":2021,"brand":"H&M","size":"L","color":"blue","quantity":10,"price":9.55,"img":"./assets/img/shop/tshirts/1.jpg","inCart":0},{"id":21,"category":"pants","title":"Slim Fit Chinos","year":2021,"brand":"H&M","size":"L","color":"beige","quantity":10,"price":39.55,"img":"./assets/img/shop/pants/1.jpg","inCart":0},{"id":22,"category":"pants","title":"Green Trousers","year":2020,"brand":"H&M","size":"L","color":"green","quantity":10,"price":21.95,"img":"./assets/img/shop/pants/5.jpg","inCart":0},{"id":31,"category":"shoes","title":"Dark Brown Boots","year":2022,"brand":"H&M","size":"M","color":"brown","quantity":10,"price":49.55,"img":"./assets/img/shop/shoes/1.jpg","inCart":0},{"id":32,"category":"shoes","title":"Men Grey Casual","year":2021,"brand":"H&M","size":"L","color":"gray","quantity":10,"price":39.95,"img":"./assets/img/shop/shoes/2.jpg","inCart":0},{"id":41,"category":"sunglasses","title":"Unisex Sunglasses","year":2020,"brand":"H&M","size":"L","color":"gray","quantity":10,"price":15.55,"img":"./assets/img/shop/sunglasses/1.jpg","inCart":0},{"id":42,"category":"sunglasses","title":"Men Aviator","year":2021,"brand":"H&M","size":"L","color":"brown","quantity":10,"price":17.95,"img":"./assets/img/shop/sunglasses/2.jpg","inCart":0},{"id":51,"category":"watches","title":"Silver Chrome Watch","year":2019,"brand":"Casio","size":"L","color":"brown","quantity":2,"price":125.95,"img":"./assets/img/shop/watches/1.jpg","inCart":0}]')}},e={};!function r(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,r),o.exports}(607)})();