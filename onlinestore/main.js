(()=>{"use strict";var t={178:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(n,o){function s(t){try{i(r.next(t))}catch(t){o(t)}}function l(t){try{i(r.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,l)}i((r=r.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(a(641)),s=n(a(81)),l=n(a(12)),i=n(a(126));e.default=class{static start(){return r(this,void 0,void 0,(function*(){document.body.addEventListener("click",s.default.dispatch);const t=yield o.default.getAll();l.default.saveToStorage("authenticData",t.default);const e=l.default.loadFromStorage("currentData")||t.default;l.default.saveToStorage("currentData",e),l.default.loadFromStorage("cart")||l.default.saveToStorage("cart",{});const a={category:[],title:"",brand:"",size:"",color:"",quantity:0,price:0};l.default.saveToStorage("filters",a),i.default.drawControls(),i.default.drawCartQ(),i.default.drawCards(e,a)}))}}},659:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static add(){}static showQ(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e+=Number(t[a].inCart));console.log(e);const a=document.querySelector(".cart-count");null!==a&&(a.textContent=String(e))}}},126:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(a(33)),o=r(a(892)),s=r(a(354)),l=r(a(12)),i=r(a(659)),c=r(a(271));e.default=class{static drawCards(t,e){console.log("Controller drawCards");const a=document.querySelector(".content"),r=o.default.complexFilter(t,e);let l=null;null!==r&&(l=s.default.generateCards(r)),null!==a&&null!==l&&(a.innerHTML="",n.default.appendElements(a,l))}static drawCartQ(){i.default.showQ(l.default.loadFromStorage("cart"))}static drawControls(){c.default.setControls(l.default.loadFromStorage("currentData"))}static clearAllData(){const t=l.default.loadFromStorage("authenticData");l.default.clearAll(),l.default.saveToStorage("currentData",t),l.default.saveToStorage("authenticData",t),l.default.saveToStorage("cart",{})}}},271:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(a(33));e.default=class{static setControls(t){const e=document.querySelector(".category");let a=new Set(t.map((t=>t.category)));a=new Set(a);const r=[...a].map((t=>{const e=document.createElement("button");return e.className="controls-category",e.setAttribute("data-filter",`category ${t}`),e.textContent=String(t).charAt(0).toUpperCase()+String(t).slice(1),e})),o=document.createElement("button");o.className="controls-category",o.setAttribute("data-filter","category All"),o.textContent="All",null!==e&&(n.default.appendElements(e,[o]),n.default.appendElements(e,r));const s=document.querySelector(".color");let l=new Set(t.map((t=>t.color)));l=new Set(l);const i=[...l].map((t=>{const e=document.createElement("div");return e.className="controls-color",e.textContent="-",e.style.background=String(t),e}));null!==s&&n.default.appendElements(s,i);const c=document.querySelector(".price");let u=t.map((t=>t.price));u=u.sort(((t,e)=>Number(t)-Number(e)));const d=u[u.length-1],p=document.createElement("p");p.textContent=String(d),p.className="short-paragraph";const g=document.createElement("input");g.setAttribute("type","range"),g.setAttribute("min","0"),g.setAttribute("max",String(d)),g.setAttribute("id","pr"),g.setAttribute("name","pr"),g.setAttribute("value",String(d)),null!==c&&n.default.appendElements(c,[p,g]);const m=document.querySelector(".year");let f=t.map((t=>t.year));f=f.sort(((t,e)=>Number(t)-Number(e)));const y=f[f.length-1],b=document.createElement("p");b.textContent=String(y),b.className="short-paragraph";const h=document.createElement("input");h.setAttribute("type","range"),h.setAttribute("min","0"),h.setAttribute("max",String(y)),h.setAttribute("step","1"),h.setAttribute("id","pr"),h.setAttribute("name","pr"),h.setAttribute("value",String(y)),null!==m&&n.default.appendElements(m,[b,h]);const v=document.querySelector(".quantity");let S=t.map((t=>t.quantity));S=S.sort(((t,e)=>Number(t)-Number(e)));const _=S[S.length-1],C=document.createElement("p");C.textContent=String(_),C.className="short-paragraph";const A=document.createElement("input");A.setAttribute("type","range"),A.setAttribute("min","0"),A.setAttribute("max",String(_)),A.setAttribute("step","1"),A.setAttribute("id","pr"),A.setAttribute("name","pr"),A.setAttribute("value",String(_)),null!==v&&n.default.appendElements(v,[C,A]);const w=document.querySelector(".brand"),M=document.createElement("select"),j=document.createElement("option");j.textContent="All";let q=new Set(t.map((t=>t.brand)));q=new Set(q);const E=[...q].map((t=>{const e=document.createElement("option");return e.className="456456",e.textContent=String(t),e}));null!==w&&(n.default.appendElements(M,[j]),n.default.appendElements(M,E),n.default.appendElements(w,[M]));const D=document.querySelector(".sort-by"),x=document.createElement("div");null!==D&&(x.insertAdjacentHTML("afterbegin",'\n    <p class = "short-paragraph">year</p>\n    <button>up</button>\n    <button>down</button>\n    '),n.default.appendElements(D,[x])),null!==D&&(x.insertAdjacentHTML("afterbegin",'\n    <p class = "short-paragraph">Title</p>\n    <button>up</button>\n    <button>down</button>\n    '),n.default.appendElements(D,[x]))}}},641:function(t,e,a){var r=this&&this.__createBinding||(Object.create?function(t,e,a,r){void 0===r&&(r=a);var n=Object.getOwnPropertyDescriptor(e,a);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(t,r,n)}:function(t,e,a,r){void 0===r&&(r=a),t[r]=e[a]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)"default"!==a&&Object.prototype.hasOwnProperty.call(t,a)&&r(e,t,a);return n(e,t),e},s=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(n,o){function s(t){try{i(r.next(t))}catch(t){o(t)}}function l(t){try{i(r.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,l)}i((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getAll(){return s(this,void 0,void 0,(function*(){return console.log("DB getAll"),yield Promise.resolve().then((()=>o(a(195))))}))}}},33:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static appendElements(t,e){const a=new DocumentFragment;Array.isArray(e)?a.append(...e):a.append(e),t.append(a)}}},81:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(a(12)),o=r(a(126)),s=r(a(659));e.default=class{static dispatch(t){var e;let a,r,l=null,i=null;const c=n.default.loadFromStorage("filters");let u=n.default.loadFromStorage("currentData"),d=n.default.loadFromStorage("cart");if(null!=t.target){switch(l=t.target,a=(null===(e=l.getAttribute("data-filter"))||void 0===e?void 0:e.split(" "))||[],a[0]){case"search":c.title=l.value;break;case"category":console.log("category",a[1]),"All"===a[1]?c.category=[]:c.category.push(a[1]);break;case"id":r=u.findIndex((t=>t.id===Number(a[1]))),i=u[r],i.quantity-=1,i.inCart+=1,u[r]=i,n.default.saveToStorage("currentData",u),d[a[1]]=i,n.default.saveToStorage("cart",d);break;case"clear-all":o.default.clearAllData(),u=n.default.loadFromStorage("currentData"),d=n.default.loadFromStorage("cart")}n.default.saveToStorage("filters",c),o.default.drawCards(n.default.loadFromStorage("currentData"),c),s.default.showQ(d)}}}},892:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static complexFilter(t,e){let a=t;const{category:r=[],title:n="",brand:o="",size:s="",color:l="",quantity:i=0,price:c=0}=e;return n&&(a=a.filter((t=>String(t.title).toLowerCase().includes(String(e.title).toLowerCase())))),Array.isArray(r)&&r.length&&(a=a.filter((t=>r.some((e=>t.category===e))))),a}}},354:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static generateCards(t){return console.log("ProductCard generateCards"),t.map((t=>this.createCard(t)))}static createCard(t){const e=document.createElement("div");e.className="product";const a=`\n    <div class="product-image" style="background-image: url(${t.img});"></div>\n    <h3 class="product-title">${t.title}</h3>\n    <div class="product-values">\n      <h2 class="product-brand">${t.brand}</h3>\n      <h2 class="product-price">$${t.price}</h3>\n    </div>\n    <div class="product-info">\n      <h2 class="product-year">${t.year}</h3>\n      <h2 class="product-quantity">${t.quantity} items</h3>\n    </div>\n    <button class="product-button" data-filter="id ${t.id}">Add to Cart</button>\n    `;return e.insertAdjacentHTML("afterbegin",a),e}}},12:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static saveToStorage(t,e){localStorage.setItem(t,JSON.stringify(e))}static loadFromStorage(t){const e=localStorage.getItem(t);return null===e?e:JSON.parse(e)}static clearAll(){null!==document.querySelector(".clear-all")&&localStorage.clear()}}},607:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),r(a(178)).default.start()},195:t=>{t.exports=JSON.parse('[{"id":1,"category":"dress","title":"Checked Short Dress","year":2020,"brand":"H&M","size":"L","color":"gray","quantity":5,"price":14.55,"img":"./assets/img/shop/dress/1.jpg","inCart":0},{"id":2,"category":"dress","title":"Light Blue Denim Dress","year":2021,"brand":"H&M","size":"L","color":"blue","quantity":10,"price":19.55,"img":"./assets/img/shop/dress/2.jpg","inCart":0},{"id":3,"category":"dress","title":"Pink Printed Dress","year":2022,"brand":"Zara","size":"L","color":"pink","quantity":10,"price":39.95,"img":"./assets/img/shop/dress/3.jpg","inCart":0},{"id":10,"category":"tshirts","title":"Blue Round-Neck","year":2020,"brand":"H&M","size":"L","color":"blue","quantity":10,"price":9.55,"img":"./assets/img/shop/tshirts/1.jpg","inCart":0},{"id":11,"category":"tshirts","title":"Black Polo Tshirt","year":2020,"brand":"H&M","size":"L","color":"black","quantity":10,"price":11.95,"img":"./assets/img/shop/tshirts/4.jpg","inCart":0},{"id":21,"category":"pants","title":"Slim Fit Chinos","year":2021,"brand":"H&M","size":"L","color":"sand","quantity":10,"price":39.55,"img":"./assets/img/shop/pants/1.jpg","inCart":0},{"id":22,"category":"pants","title":"Green Trousers","year":2020,"brand":"H&M","size":"L","color":"green","quantity":10,"price":21.95,"img":"./assets/img/shop/pants/5.jpg","inCart":0},{"id":31,"category":"shoes","title":"Dark Brown Boots","year":2022,"brand":"H&M","size":"L","color":"brown","quantity":10,"price":49.55,"img":"./assets/img/shop/shoes/1.jpg","inCart":0},{"id":32,"category":"shoes","title":"Men Grey Casual","year":2020,"brand":"H&M","size":"L","color":"gray","quantity":10,"price":39.95,"img":"./assets/img/shop/shoes/2.jpg","inCart":0},{"id":41,"category":"sunglasses","title":"Unisex Sunglasses","year":2020,"brand":"H&M","size":"L","color":"gray","quantity":10,"price":15.55,"img":"./assets/img/shop/sunglasses/1.jpg","inCart":0},{"id":42,"category":"sunglasses","title":"Men Aviator","year":2021,"brand":"H&M","size":"L","color":"brown","quantity":10,"price":17.95,"img":"./assets/img/shop/sunglasses/2.jpg","inCart":0},{"id":51,"category":"watches","title":"Silver Chrome Watch","year":2019,"brand":"H&M","size":"L","color":"brown","quantity":2,"price":125.95,"img":"./assets/img/shop/watches/1.jpg","inCart":0}]')}},e={};!function a(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,a),o.exports}(607)})();