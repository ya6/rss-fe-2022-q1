(()=>{"use strict";var e;!function(e){e.Sources="sources",e.Everything="everything",e.Empty=""}(e||(e={}));var t;!function(e){e.Sources="sources",e.Everything="everything"}(t||(t={}));class s{constructor(){this.news=new class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,s=document.createDocumentFragment(),r=document.querySelector("#newsItemTemp");t.forEach(((e,t)=>{const o=r.content.cloneNode(!0);t%2&&o.querySelector(".news__item").classList.add("alt"),o.querySelector(".news__meta-photo").style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`,o.querySelector(".news__meta-author").textContent=e.author||e.source.name,o.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),o.querySelector(".news__description-title").textContent=e.title,o.querySelector(".news__description-source").textContent=e.source.name,o.querySelector(".news__description-content").textContent=e.description,o.querySelector(".news__read-more a").setAttribute("href",e.url),s.append(o)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(s)}},this.sources=new class{draw(e){const t=document.createDocumentFragment(),s=document.querySelector("#sourceItemTemp");e.forEach((e=>{const r=s.content.cloneNode(!0);r.querySelector(".source__item-name").textContent=`${e.name}`,r.querySelector(".source__item").setAttribute("data-source-id",`${e.id}`),r.querySelector(".source__item").setAttribute("data-source-desc",`${e.description}`),t.append(r)})),document.querySelector(".sources").append(t)}}}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.sources.draw(t)}}(new class{constructor(){this.controller=new class extends class extends class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:t=e.Empty,options:s={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",t,r,s)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const s=Object.assign(Object.assign({},this.options),e);let r=`${this.baseLink}${t}?`;return Object.keys(s).forEach((e=>{const t=s[e];r+=`${e}=${t}&`})),r.slice(0,-1)}load(e,t,s,r={}){fetch(this.makeUrl(r,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>s(e))).catch((e=>console.error(e)))}}{constructor(){super("https://nodenews.herokuapp.com/",{apiKey:"eb0f5088f06a4301bab53e7b8e997aa6"})}}{getSources(e){super.getResp({endpoint:t.Sources},e)}getNews(e,s){let r=e.target;const o=e.currentTarget;for(;r!==o&&null!==r&&null!==o;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==e&&(o.setAttribute("data-source",e),super.getResp({endpoint:t.Everything,options:{sources:e}},s)))}r=r.parentNode}}},this.view=new s}start(){const e=document.querySelector(".sources"),t=document.querySelector(".tooltip");e.addEventListener("mouseover",(e=>{const s=e.target;if("DIV"===s.nodeName&&s.classList.contains("source__item")){const e=`${s.dataset.sourceDesc}`;t.classList.remove("hidden"),t.textContent=e}})),e.addEventListener("mouseout",(e=>{const s=e.target;"DIV"===s.nodeName&&s.classList.contains("source__item")&&(t.classList.add("hidden"),t.textContent="")})),e.addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e)))}}).start()})();
//# sourceMappingURL=main.js.map